{
  "pools": [
    {
      "name": "pool-api.example.com",
      "servers": [
        {
          "ip": {
            "addr": "192.168.1.301",
            "type": "V4"
          },
          "port": 8443,
          "hostname": "api1.example.com",
          "ratio": 1,
          "enabled": true
        },
        {
          "ip": {
            "addr": "192.168.1.302",
            "type": "V4"
          },
          "port": 8443,
          "hostname": "api2.example.com",
          "ratio": 1,
          "enabled": true
        }
      ],
      "lb_algorithm": "LB_ALGORITHM_CONSISTENT_HASH",
      "health_monitor_refs": [
        "/api/healthmonitor?name=System-HTTP"
      ],
      "health_monitor": {
        "type": "http",
        "http_monitor": {
          "http_method": "GET",
          "http_request": "/",
          "http_response_code": [
            {
              "code": "200"
            }
          ]
        },
        "monitor_port": 0,
        "receive_timeout": 15,
        "failed_checks": 3,
        "send_interval": 5
      },
      "enabled": true,
      "persistence_profile": {
        "type": "PERSISTENCE_TYPE_CLIENT_IP_ADDRESS"
      }
    }
  ],
  "virtual_services": [
    {
      "name": "vs-api.example.com",
      "enabled": true,
      "services": [
        {
          "port": 443,
          "enable_ssl": true
        }
      ],
      "vip": [
        {
          "ip_address": {
            "addr": "192.168.1.300",
            "type": "V4"
          },
          "enabled": true
        }
      ],
      "pool_ref": "/api/pool?name=pool-api.example.com",
      "application_profile_ref": "/api/applicationprofile?name=http-vs-api.example.com",
      "network_profile_ref": "/api/networkprofile?name=System-TCP-Proxy",
      "ssl_profile_ref": "/api/sslprofile?name=ssl-cert-api.example.com",
      "ssl_key_and_certificate_refs": [
        "/api/sslkeyandcertificate?name=cert-api.example.com"
      ],
      "http_policies": [
        {
          "name": "redirect-vs-api.example.com",
          "http_request_policy": {
            "rules": [
              {
                "name": "redirect-http-to-https",
                "redirect_action": {
                  "protocol": "HTTPS",
                  "port": 443,
                  "status_code": "HTTP_REDIRECT_STATUS_CODE_302"
                }
              }
            ]
          }
        }
      ]
    }
  ],
  "application_profiles": [
    {
      "name": "http-vs-api.example.com",
      "type": "APPLICATION_PROFILE_TYPE_HTTP",
      "http_profile": {
        "x_forwarded_proto_enabled": true,
        "x_forwarded_for_enabled": true,
        "hsts_enabled": true,
        "hsts_max_age": 31536000,
        "hsts_subdomains_enabled": true
      }
    }
  ],
  "tenant": "PROD",
  "version": "20.1.1",
  "description": "Generated by LBaaS for PROD in UKDC",
  "ssl_profiles": [
    {
      "name": "ssl-cert-api.example.com",
      "certificate_refs": [
        "/api/sslkeyandcertificate?name=cert-api.example.com"
      ],
      "ssl_profile_ref": "/api/sslprofile?name=System-Standard",
      "enabled": true,
      "accepted_versions": [
        {
          "type": "SSL_VERSION_TLS1_2"
        },
        {
          "type": "SSL_VERSION_TLS1_3"
        }
      ],
      "client_auth": true,
      "ca_certs": [
        "/api/sslkeyandcertificate?name=ca-cert-api.example.com"
      ],
      "client_auth_require": true,
      "validate_depth": 2
    }
  ]
}